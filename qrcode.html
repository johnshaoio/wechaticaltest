<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="./js/html5-qrcode.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>

</head>
<body>

<h1>This isss ass 20210129 asdfasasdfassssd df cvxzcvasdf</h1>
<p>This isss a sssssfas ssszxcvasdf dfasdfs.</p>
<div id="reader" width="600px"></div>

</body>

<script>

function onScanSuccess(qrMessage) {
	// handle the scanned code as you like

	if(qrMessage.includes('gov.mo')){
		window.location.href = qrMessage;
	}else{
		alert(`QR matched = ${qrMessage}`);
	}

}

function onScanFailure(error) {
	// handle scan failure, usually better to ignore and keep scanning
	console.warn(`QR error = ${error}`);
}

let html5QrcodeScanner = new Html5QrcodeScanner(
	"reader", { fps: 10, qrbox: 250 }, /* verbose= */ true);
html5QrcodeScanner.render(onScanSuccess, onScanFailure);

Html5Qrcode.getCameras().then(devices => {
  /**
   * devices would be an array of objects of type:
   * { id: "id", label: "label" }
   */
  $('body').append('aaa');
  $('body').append(devices);
  console.log(devices);

	devices.forEach(device => {
		$('body').prepend(device.id+'<br />');
		$('body').prepend(device.label+'<br />');
	});

  if (devices && devices.length) {
    var cameraId = devices[0].id;
    // .. use this to start scanning.
	//$('body').append(cameraId);
  }
}).catch(err => {
  // handle err
});


</script>

</html>